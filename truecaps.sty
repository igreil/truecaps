%----------------------------------- -----------------------------------------
% This is file "truecaps.sty" v0.5 (2022-04-29)
% It was forked from निरंजन's "unisc.sty" v0.1 (2022-04-21)
%
% This file and possibly later versions can be found on
% <https://https://github.com/igreil/truecaps>
%
% The original files by निरंजन [Niranjan] can be found 
% on CTAN <https://ctan.org/pkg/unisc> and at 
% <https://puszcza.gnu.org.ua/projects/unisc>
%
% License:		GPLv3 and GFDLv1.3+
%
%----------------------------------- -----------------------------------------
%
% LaTeX Package truecaps v0.5 (2022-04-29)
% Copyright © 2022 निरंजन [Niranjan] and Ingmar Greil
%
% This program is free software: you can redistribute it and/or modify it
% under the terms of the GNU General Public License as published by the Free
% Software Foundation, either version 3 of the License, or (at your option)
% any later version.
%
% This program is distributed in the hope that it will be useful, but WITHOUT
% ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
% FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
% more details.
%
% You should have received a copy of the GNU General Public License along 
% with this program. If not, see <https://www.gnu.org/licenses/>.
%
%----------------------------------------------------------------------------
\def\truecapsname			{truecaps}		\def\truecapsversion		{0.5}
\def\truecapsdate			{2022-04-29}
\def\truecapsdescription	{Unicode TʀᴜᴇCᴀᴘꜱ with LuaLaTex}

\ProvidesPackage{\truecapsname}[\truecapsdate\truecapsdescription]
\RequirePackage{pgfparser,xpatch}

\ifdefined\directlua
	\RequirePackage{ifluatex,luatexbase,luacode}
	\RequirePackage{kvoptions,atveryend}
\else
	\PackageError{This package is meant for LuaTeX only! Aborting}
				{No more information available, sorry!}
\fi

%FIXME & DEBUG:
%https://mirror.clientvps.com/CTAN/macros/luatex/latex/lua-typo/lua-typo-2021-04-18.sty

\NewCommandCopy\texttc\textsc
\NewCommandCopy\tcshape\scshape

% Yes, we actually need this twice:
\xpatchcmd{\textsc}{\scshape}{\tcshape}{}{\ERROR}
\xpatchcmd{\textsc}{\scshape}{\tcshape}{}{\ERROR}	% You're welcome.
% https://topanswers.xyz/transcript?room=2050&id=138859#c138859

\protected\long\def\truecaps@output#1{%
	\xdef\truecaps@outputcontainer{%
		\unexpanded\expandafter{%
			\truecaps@outputcontainer\unexpanded{#1}%
		}%
	}%
}

\protected\long\def\truecaps@outputexpanded#1{%
	\xdef\truecaps@outputcontainer{%
		\unexpanded\expandafter{\truecaps@outputcontainer#1%
		}%
	}%
}

\providecommand\@gobbletwo[2]{}

\pgfparserdefunknown{scparser}{initial}{%
	\let\truecaps@initiated\@empty
	\pgfparserswitch{initiated}%
	\pgfparserreinsert
}

\pgfparserset{scparser/silent=true}

\pgfparserdefunknown{scparser}{all}{%
	\expandafter\truecaps@output\expandafter{\pgfparserletter}%
}

\newcommand*\truecaps@bgroup{\expandafter{\iffalse}\fi}
\newcommand*\truecaps@egroup{\iffalse{\fi}}

\pgfparserdef{scparser}{all}\begingroup
	{\begingroup\truecaps@outputexpanded\begingroup}

\pgfparserdef{scparser}{all}\endgroup
	{\truecaps@checkend\endgroup}

\pgfparserdef{scparser}{all}{\meaning\bgroup}
	{\truecaps@bgroup\truecaps@outputexpanded\truecaps@bgroup}

\pgfparserdef{scparser}{all}{\meaning\egroup}
	{\truecaps@checkend\truecaps@egroup}

\newcommand\truecaps@savedefinition[1]
	{\unexpanded{\def#1}{\unexpanded\expandafter{#1}}}

\protected\def\truecaps@checkend#1{%
	\expanded{%
		\unexpanded{#1}%
		\unexpanded{\ifdefined\truecaps@initiated}%
		\truecaps@savedefinition\pgfparserstate
		\unexpanded{\truecaps@outputexpanded#1}%
		\unexpanded{\else}%
		\unexpanded{\pgfparserswitch{final}}%
		\truecaps@savedefinition\pgfparser@current
		\truecaps@savedefinition\pgfparser@usersname
		\unexpanded{\fi}%
	}%
}

\newcommand\thornwarning{			% see ca. line #369 FIXME
Unsupported character LATIN SMALL LETTER THORN (U+00FE): 
substituted with LATIN CAPITAL LETTER THORN (U+00DE)%
}

\newcommand\xwarning{				% see ca. line #469	FIXME
Unsupported character LATIN SMALL LETTER X (U+0078): 
inserted as is%
}

%----------- SUPPORTED LETTERS BELOW -----------------------------------------

% LATIN LETTER SMALL CAPITAL A								(U+1D00)	ᴀ
% LATIN LETTER SMALL CAPITAL AE								(U+1D01)	ᴁ
% LATIN LETTER SMALL CAPITAL B								(U+0299)	ʙ
% LATIN LETTER SMALL CAPITAL C								(U+1D04)	ᴄ
% LATIN LETTER SMALL CAPITAL D								(U+1D05)	ᴅ
% LATIN LETTER SMALL CAPITAL ETH							(U+1D06)	ᴆ
% LATIN LETTER SMALL CAPITAL E								(U+1D07)	ᴇ
% LATIN LETTER SMALL CAPITAL F								(U+A730)	ꜰ
% LATIN LETTER SMALL CAPITAL G								(U+0262)	ɢ
% LATIN LETTER SMALL CAPITAL H								(U+029C)	ʜ
% LATIN LETTER SMALL CAPITAL I								(U+026A)	Ɪ
% LATIN LETTER SMALL CAPITAL J								(U+1D0A)	ᴊ
% LATIN LETTER SMALL CAPITAL K								(U+1D0B)	ᴋ
% LATIN LETTER SMALL CAPITAL L								(U+029F)	ʟ
% LATIN LETTER SMALL CAPITAL M								(U+1D0D)	ᴍ
% LATIN LETTER SMALL CAPITAL N								(U+0274)	ɴ
% LATIN LETTER SMALL CAPITAL O								(U+1D0F)	ᴏ
% LATIN LETTER SMALL CAPITAL OE								(U+0276)	ɶ
% LATIN LETTER SMALL CAPITAL P								(U+1D18)	ᴘ
% LATIN LETTER SMALL CAPITAL Q								(U+A7AF)	ꞯ
% LATIN LETTER SMALL CAPITAL R								(U+0280)	ʀ
% LATIN LETTER SMALL CAPITAL S								(U+A731)	ꜱ
% LATIN LETTER SMALL CAPITAL T								(U+1D1B)	ᴛ
% LATIN LETTER SMALL CAPITAL U								(U+1D1C)	ᴜ
% LATIN LETTER SMALL CAPITAL V								(U+1D20)	ᴠ
% LATIN LETTER SMALL CAPITAL W								(U+1D21)	ᴡ
% 		NOTE: X IS UNDEFINED		see line #120 above
% LATIN LETTER SMALL CAPITAL Y								(U+028F)	ʏ
% LATIN LETTER SMALL CAPITAL Z								(U+1D22)	ᴢ

%----------- AVAILABLE MODIFIERS ---------------------------------------------

% COMBINING GRAVE ACCENT									(U+0300)	 ̀
% COMBINING ACUTE ACCENT									(U+0301)	 ́
% COMBINING CIRCUMFLE ACCENT								(U+0302)	 ̂
% COMBINING TILDE											(U+0303)	 ̃
% COMBINING MACRON											(U+0304)	 ̄
% COMBINING BREVE											(U+0306)	 ̆
% COMBINING DOT ABOVE										(U+0307)	 ̇
% COMBINING DIAERESIS										(U+0308)	 ̈
% COMBINING HOOK ABOVE										(U+0309)	 ̉
% COMBINING INVERTED BREVE									(U+0311)	 ̑
% COMBINING RING ABOVE										(U+030A)	 ̊
% COMBINING DOUBLE ACUTE ACCENT								(U+030B)	 ̋
% COMBINING CARON											(U+030C)	 ̌
% COMBINING DOUBLE GRAVE ACCENT								(U+030F)	 ̏
% COMBINING DOT BELOW										(U+0323)	 ̣
% COMBINING RING BELOW										(U+0325)	 ̥
% COMBINING COMMA BELOW										(U+0326)	 ̦
% COMBINING CEDILLA											(U+0327)	 ̧
% COMBINING OGONEK											(U+0328)	 ̨
% COMBINING CIRCUMFLEX ACCENT BELOW							(U+032D)	 ̮
% COMBINING BREVE BELOW										(U+032E)	 ̮
% COMBINING MACRON BELOW									(U+0331)	 ̱
% COMBINING SHORT SOLIDUS OVERLAY							(U+0337)	 ̷
% COMBINING LONG SOLIDUS OVERLAY							(U+0338)	 ̸

%-----------------------------------------------------------------------------

% LATIN LETTER SMALL CAPITAL A								(U+1D00)
\pgfparserdef{scparser}{initiated}a {\truecaps@outputexpanded{ᴀ}}
\pgfparserdef{scparser}{initiated}A {\truecaps@outputexpanded{A}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING GRAVE ACCENT						(U+0300)
		\pgfparserdef{scparser}{initiated}à	{\truecaps@outputexpanded{ᴀ̀}}
		\pgfparserdef{scparser}{initiated}À	{\truecaps@outputexpanded{À}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING ACUTE ACCENT						(U+0301)
		\pgfparserdef{scparser}{initiated}á {\truecaps@outputexpanded{ᴀ́}}
		\pgfparserdef{scparser}{initiated}Á {\truecaps@outputexpanded{Á}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING CIRCUMFLEX ACCENT					(U+0302)
		\pgfparserdef{scparser}{initiated}â {\truecaps@outputexpanded{ᴀ̂}}
		\pgfparserdef{scparser}{initiated}Â {\truecaps@outputexpanded{Â}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING TILDE								(U+0303)
		\pgfparserdef{scparser}{initiated}ã {\truecaps@outputexpanded{ᴀ̃}}
		\pgfparserdef{scparser}{initiated}Ã {\truecaps@outputexpanded{Ã}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING MACRON							(U+0304)
		\pgfparserdef{scparser}{initiated}ā {\truecaps@outputexpanded{ᴀ̄}}
		\pgfparserdef{scparser}{initiated}Ā {\truecaps@outputexpanded{Ā}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING BREVE								(U+0306)
		\pgfparserdef{scparser}{initiated}ă {\truecaps@outputexpanded{ᴀ̆}}
		\pgfparserdef{scparser}{initiated}Ă {\truecaps@outputexpanded{Ă}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING DOT ABOVE							(U+0307)
		\pgfparserdef{scparser}{initiated}ȧ {\truecaps@outputexpanded{ᴀ̇}}
		\pgfparserdef{scparser}{initiated}Ȧ {\truecaps@outputexpanded{Ȧ}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING DIAERESIS							(U+0308)
		\pgfparserdef{scparser}{initiated}ä {\truecaps@outputexpanded{ᴀ̈}}
		\pgfparserdef{scparser}{initiated}Ä {\truecaps@outputexpanded{Ä}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING HOOK ABOVE 						(U+0309)
		\pgfparserdef{scparser}{initiated}ả {\truecaps@outputexpanded{ᴀ̉}}
		\pgfparserdef{scparser}{initiated}Ả {\truecaps@outputexpanded{Ả}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING INVERTED BREVE					(U+0311)
		\pgfparserdef{scparser}{initiated}ȃ {\truecaps@outputexpanded{ᴀ̑}}
		\pgfparserdef{scparser}{initiated}Ȃ {\truecaps@outputexpanded{Ȃ}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING RING ABOVE						(U+030A)
		\pgfparserdef{scparser}{initiated}å {\truecaps@outputexpanded{ᴀ̊}}
		\pgfparserdef{scparser}{initiated}Å {\truecaps@outputexpanded{Å}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING CARON 							(U+030C)
		\pgfparserdef{scparser}{initiated}ǎ {\truecaps@outputexpanded{ᴀ̌}}
		\pgfparserdef{scparser}{initiated}Ǎ {\truecaps@outputexpanded{Ǎ}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING DOUBLE GRAVE ACCENT				(U+030F)
		\pgfparserdef{scparser}{initiated}ȁ {\truecaps@outputexpanded{ᴀ̏}}
		\pgfparserdef{scparser}{initiated}Ȁ {\truecaps@outputexpanded{Ȁ}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING DOT BELOW							(U+0323)
		\pgfparserdef{scparser}{initiated}ạ {\truecaps@outputexpanded{ᴀ̣}}
		\pgfparserdef{scparser}{initiated}Ạ {\truecaps@outputexpanded{Ạ}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING RING BELOW						(U+0325)
		\pgfparserdef{scparser}{initiated}ḁ {\truecaps@outputexpanded{ᴀ̥}}
		\pgfparserdef{scparser}{initiated}Ḁ {\truecaps@outputexpanded{Ḁ}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING OGONEK							(U+0328)
		\pgfparserdef{scparser}{initiated}ą {\truecaps@outputexpanded{ᴀ̨}}
		\pgfparserdef{scparser}{initiated}Ą {\truecaps@outputexpanded{Ą}}

	% LATIN LETTER SMALL CAPITAL A							(U+1D00)
	%	with	COMBINING RING ABOVE						(U+030A)
	%	and		COMBINING ACUTE ACCENT						(U+030A)
		\pgfparserdef{scparser}{initiated}ǻ {\truecaps@outputexpanded{ᴀ̊́}}
		\pgfparserdef{scparser}{initiated}Ǻ {\truecaps@outputexpanded{Ǻ}}

	%TODO: Ǟ Ǡ Ấ Ầ Ẩ Ẫ Ậ Ắ Ằ Ẳ Ẵ Ặ ẚ

%-----------------------------------------------------------------------------

% LATIN LETTER SMALL CAPITAL AE								(U+1D01)
\pgfparserdef{scparser}{initiated}æ {\truecaps@outputexpanded{ᴁ}}
\pgfparserdef{scparser}{initiated}Æ {\truecaps@outputexpanded{Æ}}

	% LATIN LETTER SMALL CAPITAL AE							(U+1D01)
	%	with	COMBINING ACUTE ACCENT						(U+0301)
		\pgfparserdef{scparser}{initiated}ǽ {\truecaps@outputexpanded{ᴁ́}}
		\pgfparserdef{scparser}{initiated}Ǽ {\truecaps@outputexpanded{Ǽ}}

	% LATIN LETTER SMALL CAPITAL AE							(U+1D01)
	%	with	COMBINING MACRON							(U+0304)
		\pgfparserdef{scparser}{initiated}ǣ {\truecaps@outputexpanded{ᴁ̄}}
		\pgfparserdef{scparser}{initiated}Ǣ {\truecaps@outputexpanded{Ǣ}}

%-----------------------------------------------------------------------------

% LATIN LETTER SMALL CAPITAL B 								(U+0299)
\pgfparserdef{scparser}{initiated}b {\truecaps@outputexpanded{ʙ}}
\pgfparserdef{scparser}{initiated}B {\truecaps@outputexpanded{B}}

	% LATIN LETTER SMALL CAPITAL B							(U+0299)
	%	with	COMBINING DOT ABOVE							(U+0307)
		\pgfparserdef{scparser}{initiated}ḃ {\truecaps@outputexpanded{ʙ̇}}
		\pgfparserdef{scparser}{initiated}Ḃ {\truecaps@outputexpanded{Ḃ}}

	% LATIN LETTER SMALL CAPITAL B							(U+0299)
	%	with	COMBINING DOT BELOW							(U+0323)
		\pgfparserdef{scparser}{initiated}ḅ {\truecaps@outputexpanded{ʙ̣}}
		\pgfparserdef{scparser}{initiated}Ḅ {\truecaps@outputexpanded{Ḅ}}

	% LATIN LETTER SMALL CAPITAL B							(U+0299)
	%	with	COMBINING MACRON BELOW						(U+0331)
		\pgfparserdef{scparser}{initiated}ḇ {\truecaps@outputexpanded{ʙ̱}}
		\pgfparserdef{scparser}{initiated}Ḇ {\truecaps@outputexpanded{Ḇ}}

%-----------------------------------------------------------------------------

% LATIN LETTER SMALL CAPITAL C								(U+1D04)
\pgfparserdef{scparser}{initiated}c {\truecaps@outputexpanded{ᴄ}}
\pgfparserdef{scparser}{initiated}C {\truecaps@outputexpanded{C}}

	% LATIN LETTER SMALL CAPITAL C							(U+1D04)
	%	with	COMBINING ACUTE ACCENT						(U+0301)
		\pgfparserdef{scparser}{initiated}ć {\truecaps@outputexpanded{ᴄ́}}
		\pgfparserdef{scparser}{initiated}Ć {\truecaps@outputexpanded{Ć}}

	% LATIN LETTER SMALL CAPITAL C							(U+1D04)
	%	with	COMBINING CIRCUMFLEX ACCENT					(U+0302)
		\pgfparserdef{scparser}{initiated}ĉ {\truecaps@outputexpanded{ᴄ̂}}
		\pgfparserdef{scparser}{initiated}Ĉ {\truecaps@outputexpanded{Ĉ}}

	% LATIN LETTER SMALL CAPITAL C							(U+1D04)
	%	with	COMBINING DOT ABOVE							(U+0307)
		\pgfparserdef{scparser}{initiated}ċ {\truecaps@outputexpanded{ᴄ̇}}
		\pgfparserdef{scparser}{initiated}Ċ {\truecaps@outputexpanded{Ċ}}

	% LATIN LETTER SMALL CAPITAL C							(U+1D04)
	%	with	COMBINING CARON								(U+030C)
		\pgfparserdef{scparser}{initiated}č {\truecaps@outputexpanded{ᴄ̌}}
		\pgfparserdef{scparser}{initiated}Č {\truecaps@outputexpanded{Č}}

	% LATIN LETTER SMALL CAPITAL C							(U+1D04)
	%	with	COMBINING CEDILLA							(U+0327)
		\pgfparserdef{scparser}{initiated}ç {\truecaps@outputexpanded{ᴄ̧}}
		\pgfparserdef{scparser}{initiated}Ç {\truecaps@outputexpanded{Ç}}

%-----------------------------------------------------------------------------

% LATIN LETTER SMALL CAPITAL D								(U+1D05)
\pgfparserdef{scparser}{initiated}d {\truecaps@outputexpanded{ᴅ}}
\pgfparserdef{scparser}{initiated}D {\truecaps@outputexpanded{D}}

	% LATIN LETTER SMALL LETTER ETH							(U+00F0)
		\pgfparserdef{scparser}{initiated}ð {\truecaps@outputexpanded{ᴆ}}
		\pgfparserdef{scparser}{initiated}Ð {\truecaps@outputexpanded{Ð}}
	% LATIN SMALL LETTER D WITH STROKE						(U+0111)
		\pgfparserdef{scparser}{initiated}đ {\truecaps@outputexpanded{ᴆ}}
		\pgfparserdef{scparser}{initiated}Đ {\truecaps@outputexpanded{Đ}}
	% LATIN SMALL LETTER D WITH TAIL						(U+0256)
		\pgfparserdef{scparser}{initiated}ɖ {\truecaps@outputexpanded{ᴆ}}
		\pgfparserdef{scparser}{initiated}Ɖ {\truecaps@outputexpanded{Ɖ}}

	% LATIN LETTER SMALL CAPITAL D							(U+1D05)
	%	with	COMBINING DOT ABOVE							(U+0307)
		\pgfparserdef{scparser}{initiated}ḋ {\truecaps@outputexpanded{ᴅ̇}}
		\pgfparserdef{scparser}{initiated}Ḋ {\truecaps@outputexpanded{Ḋ}}

	% LATIN LETTER SMALL CAPITAL D							(U+1D05)
	%	with	COMBINING CARON								(U+030C)
		\pgfparserdef{scparser}{initiated}ď {\truecaps@outputexpanded{ᴅ̌}}
		\pgfparserdef{scparser}{initiated}Ď {\truecaps@outputexpanded{Ď}}

	% LATIN LETTER SMALL CAPITAL D							(U+1D05)
	%	with	COMBINING DOT BELOW							(U+0323)
		\pgfparserdef{scparser}{initiated}ḍ {\truecaps@outputexpanded{ᴅ̣}}
		\pgfparserdef{scparser}{initiated}Ḍ {\truecaps@outputexpanded{Ḍ}}

	% LATIN LETTER SMALL CAPITAL D							(U+1D05)
	%	with	COMBINING CEDILLA							(U+0327)
		\pgfparserdef{scparser}{initiated}ḑ {\truecaps@outputexpanded{ᴅ̧}}
		\pgfparserdef{scparser}{initiated}Ḑ {\truecaps@outputexpanded{Ḑ}}

	% LATIN LETTER SMALL CAPITAL D							(U+1D05)
	%	with	COMBINING MACRON BELOW						(U+0331)
		\pgfparserdef{scparser}{initiated}ḏ {\truecaps@outputexpanded{ᴅ̱}}
		\pgfparserdef{scparser}{initiated}Ḏ {\truecaps@outputexpanded{Ḏ}}

	% LATIN LETTER SMALL CAPITAL D							(U+1D05)
	%	with	COMBINING CIRCUMFLEX ACCENT BELOW			(U+032D)
		\pgfparserdef{scparser}{initiated}ḓ {\truecaps@outputexpanded{ᴅ̭}}
		\pgfparserdef{scparser}{initiated}Ḓ {\truecaps@outputexpanded{Ḓ}}

	% LATIN CAPITAL LETTER DZ WITH CARON					(U+01C4)
		\pgfparserdef{scparser}{initiated}Ǆ {\truecaps@outputexpanded{DŽ}}
	% LATIN CAPITAL LETTER D WITH SMALL LETTER Z WITH CARON	(U+01C5)
		\pgfparserdef{scparser}{initiated}ǅ {\truecaps@outputexpanded{Dᴢ̌}}
	% LATIN SMALL LETTER DZ WITH CARON						(U+01C6)
		\pgfparserdef{scparser}{initiated}ǆ {\truecaps@outputexpanded{ᴅᴢ̌}}

	% LATIN CAPITAL LETTER DZ								(U+01F1)
		\pgfparserdef{scparser}{initiated}Ǳ {\truecaps@outputexpanded{DZ}}
	% LATIN CAPITAL LETTER D WITH SMALL LETTER Z			(U+01F2)
		\pgfparserdef{scparser}{initiated}ǲ {\truecaps@outputexpanded{Dᴢ}}
	% LATIN SMALL LETTER DZ									(U+01F3)
		\pgfparserdef{scparser}{initiated}ǳ {\truecaps@outputexpanded{ᴅᴢ}}

% XYZZY-----------------------------------------------------------------------

% LATIN LETTER SMALL CAPITAL E (U+1D07)
\pgfparserdef{scparser}{initiated}e {\truecaps@outputexpanded{ᴇ}}
\pgfparserdef{scparser}{initiated}E {\truecaps@outputexpanded{E}}

	% LATIN LETTER SMALL CAPITAL E (U+1D07) + COMBINING GRAVE ACCENT (U+0300)
	\pgfparserdef{scparser}{initiated}è {\truecaps@outputexpanded{ᴇ̀}}
	\pgfparserdef{scparser}{initiated}È {\truecaps@outputexpanded{È}}

	% LATIN LETTER SMALL CAPITAL E (U+1D07) + COMBINING ACUTE ACCENT (U+0301)
	\pgfparserdef{scparser}{initiated}é {\truecaps@outputexpanded{ᴇ́}}
	\pgfparserdef{scparser}{initiated}É {\truecaps@outputexpanded{É}}

	% LATIN LETTER SMALL CAPITAL E (U+1D07) + COMBINING DIAERESIS (U+0308)
	\pgfparserdef{scparser}{initiated}ë {\truecaps@outputexpanded{ᴇ̈}}
	\pgfparserdef{scparser}{initiated}Ë {\truecaps@outputexpanded{Ë}}

	% LATIN LETTER SMALL CAPITAL E (U+1D07) + COMBINING CIRCUMFLEX ACCENT (U+0302)
	\pgfparserdef{scparser}{initiated}ê {\truecaps@outputexpanded{ᴇ̂}}
	\pgfparserdef{scparser}{initiated}Ê {\truecaps@outputexpanded{Ê}}

	% LATIN LETTER SMALL CAPITAL E (U+1D07) + COMBINING CARON (U+030C)
	\pgfparserdef{scparser}{initiated}ě {\truecaps@outputexpanded{ᴇ̌}}
	\pgfparserdef{scparser}{initiated}Ě {\truecaps@outputexpanded{Ě}}


	% LATIN LETTER SMALL CAPITAL E							(U+1D07)
	%	with	COMBINING MACRON							(U+0304)
		\pgfparserdef{scparser}{initiated}ē {\truecaps@outputexpanded{ᴇ̄}}
		\pgfparserdef{scparser}{initiated}Ē {\truecaps@outputexpanded{Ē}}

	% LATIN LETTER SMALL CAPITAL E							(U+1D07)
	%	with	COMBINING BREVE								(U+0306)
		\pgfparserdef{scparser}{initiated}ĕ {\truecaps@outputexpanded{ᴇ̆}}
		\pgfparserdef{scparser}{initiated}Ĕ {\truecaps@outputexpanded{Ĕ}}

	% LATIN LETTER SMALL CAPITAL E							(U+1D07)
	%	with	COMBINING DOT ABOVE							(U+0307)
		\pgfparserdef{scparser}{initiated}ė {\truecaps@outputexpanded{ᴇ̇}}
		\pgfparserdef{scparser}{initiated}Ė {\truecaps@outputexpanded{Ė}}

	% LATIN LETTER SMALL CAPITAL E							(U+1D07)
	%	with	COMBINING OGONEK							(U+0328)
		\pgfparserdef{scparser}{initiated}ę {\truecaps@outputexpanded{ᴇ̨}}
		\pgfparserdef{scparser}{initiated}Ę {\truecaps@outputexpanded{Ę}}

	% TODO:Ȅ Ȇ Ȩ Ė Ẹ Ẻ Ẽ Ế Ề Ể Ễ Ệ -> https://www.compart.com/en/unicode/U+0045

% LATIN LETTER SMALL CAPITAL F (U+A730)
\pgfparserdef{scparser}{initiated}f {\truecaps@outputexpanded{ꜰ}}
\pgfparserdef{scparser}{initiated}F {\truecaps@outputexpanded{F}}


	% LATIN LETTER SMALL CAPITAL E							(U+A730)
	%	with	COMBINING DOT ABOVE							(U+0307)
		\pgfparserdef{scparser}{initiated}ḟ {\truecaps@outputexpanded{ꜰ̇}}
		\pgfparserdef{scparser}{initiated}Ḟ {\truecaps@outputexpanded{Ḟ}}


% LATIN LETTER SMALL CAPITAL G (U+0262)
\pgfparserdef{scparser}{initiated}g {\truecaps@outputexpanded{ɢ}}
\pgfparserdef{scparser}{initiated}G {\truecaps@outputexpanded{G}}

	% LATIN LETTER SMALL CAPITAL G (U+0262) + COMBINING BREVE (U+0306)
	\pgfparserdef{scparser}{initiated}ğ {\truecaps@outputexpanded{ɢ̆}}
	\pgfparserdef{scparser}{initiated}Ğ {\truecaps@outputexpanded{Ğ}}

% LATIN LETTER SMALL CAPITAL G							(U+0262)
	%	with	COMBINING DOT ABOVE						(U+0307)
		\pgfparserdef{scparser}{initiated}ġ {\truecaps@outputexpanded{ɢ̇}}
		\pgfparserdef{scparser}{initiated}Ġ {\truecaps@outputexpanded{Ġ}}

	% TODO Ǧ Ģ Ĝ Ǵ Ḡ

% LATIN LETTER SMALL CAPITAL H (U+029C)
\pgfparserdef{scparser}{initiated}h {\truecaps@outputexpanded{ʜ}}
\pgfparserdef{scparser}{initiated}H {\truecaps@outputexpanded{H}}

% LATIN SMALL LETTER H WITH STROKE
\pgfparserdef{scparser}{initiated}ħ {\truecaps@outputexpanded{ʜ̵̶}}
\pgfparserdef{scparser}{initiated}Ħ {\truecaps@outputexpanded{Ħ}}

	% LATIN LETTER SMALL CAPITAL H (U+029C) + COMBINING BREVE BELOW (U+032E)
	\pgfparserdef{scparser}{initiated}ḫ {\truecaps@outputexpanded{ʜ̮}}
	\pgfparserdef{scparser}{initiated}Ḫ {\truecaps@outputexpanded{Ḫ}}

	% TODO Ĥ Ȟ Ḣ Ḥ Ḧ Ḩ 

% LATIN LETTER SMALL CAPITAL I 		(U+026A)
\pgfparserdef{scparser}{initiated}i {\truecaps@outputexpanded{ɪ}}
\pgfparserdef{scparser}{initiated}I {\truecaps@outputexpanded{I}}

	% LATIN LETTER SMALL CAPITAL I 	(U+026A)
		%+ COMBINING DIAERESIS 		(U+0308)
	\pgfparserdef{scparser}{initiated}ï {\truecaps@outputexpanded{ɪ̈}}
	\pgfparserdef{scparser}{initiated}Ï {\truecaps@outputexpanded{Ï}}

	% LATIN LETTER SMALL CAPITAL I 	(U+026A)
		% + COMBINING GRAVE ACCENT 	(U+0300)
	\pgfparserdef{scparser}{initiated}ì {\truecaps@outputexpanded{ɪ̀}}
	\pgfparserdef{scparser}{initiated}Ì {\truecaps@outputexpanded{Ì}}

	% LATIN LETTER SMALL CAPITAL I 	(U+026A)
		% + COMBINING ACUTE ACCENT 	(U+0301)
	\pgfparserdef{scparser}{initiated}í {\truecaps@outputexpanded{ɪ́}}
	\pgfparserdef{scparser}{initiated}Í {\truecaps@outputexpanded{Í}}

	% LATIN LETTER SMALL CAPITAL I 	(U+026A)
		% + COMBINING ACUTE ACCENT 	(U+0302)
	\pgfparserdef{scparser}{initiated}î {\truecaps@outputexpanded{ɪ̂}}
	\pgfparserdef{scparser}{initiated}Î {\truecaps@outputexpanded{Î}}

	% TODO: İ Į

% LATIN LETTER SMALL CAPITAL J (U+1D0A)
\pgfparserdef{scparser}{initiated}j {\truecaps@outputexpanded{ᴊ}}
\pgfparserdef{scparser}{initiated}J {\truecaps@outputexpanded{J}}

	% LATIN LETTER SMALL CAPITAL J (U+1D0A)
		% + COMBINING CIRCUMFLEX ACCENT (U+0302)
	\pgfparserdef{scparser}{initiated}ĵ {\truecaps@outputexpanded{ᴊ̂}}
	\pgfparserdef{scparser}{initiated}Ĵ {\truecaps@outputexpanded{Ĵ}}

% LATIN LETTER SMALL CAPITAL K (U+1D0B)
\pgfparserdef{scparser}{initiated}k {\truecaps@outputexpanded{ᴋ}}
\pgfparserdef{scparser}{initiated}K {\truecaps@outputexpanded{K}}

	% TODO Ķ Ǩ Ḱ Ḳ Ḵ

% LATIN LETTER SMALL CAPITAL L (U+029F)
\pgfparserdef{scparser}{initiated}l {\truecaps@outputexpanded{ʟ}}
\pgfparserdef{scparser}{initiated}L {\truecaps@outputexpanded{L}}

	\pgfparserdef{scparser}{initiated}ŀ {\truecaps@outputexpanded{ʟ·}}
	\pgfparserdef{scparser}{initiated}Ŀ {\truecaps@outputexpanded{L·}}

	% TODO Ĺ Ļ Ľ Ḷ Ḻ Ḽ

% LATIN LETTER SMALL CAPITAL M (U+1D0D)
\pgfparserdef{scparser}{initiated}m {\truecaps@outputexpanded{ᴍ}}
\pgfparserdef{scparser}{initiated}M {\truecaps@outputexpanded{M}}

	% TODO Ḿ Ṁ Ṃ

% LATIN LETTER SMALL CAPITAL N (U+0274)
\pgfparserdef{scparser}{initiated}n {\truecaps@outputexpanded{ɴ}}
\pgfparserdef{scparser}{initiated}N {\truecaps@outputexpanded{N}}

	% LATIN LETTER SMALL CAPITAL N (U+0274) + COMBINING CARON (U+030C)
	\pgfparserdef{scparser}{initiated}ň {\truecaps@outputexpanded{ɴ̌}}
	\pgfparserdef{scparser}{initiated}Ň {\truecaps@outputexpanded{Ň}}

	% LATIN LETTER SMALL CAPITAL N (U+0274) + COMBINING TILDE (U+0303)
	\pgfparserdef{scparser}{initiated}ñ {\truecaps@outputexpanded{ɴ̃}}
	\pgfparserdef{scparser}{initiated}Ñ {\truecaps@outputexpanded{Ñ}}

	% TODO Ń Ņ Ǹ Ṅ Ṇ Ṉ Ṋ

% LATIN LETTER SMALL CAPITAL O (U+1D0F)
\pgfparserdef{scparser}{initiated}o {\truecaps@outputexpanded{ᴏ}}
\pgfparserdef{scparser}{initiated}O {\truecaps@outputexpanded{O}}

	% LATIN LETTER SMALL CAPITAL O (U+1D0F) + COMBINING DIAERESIS (U+0308)
	\pgfparserdef{scparser}{initiated}ö {\truecaps@outputexpanded{ᴏ̈}}
	\pgfparserdef{scparser}{initiated}Ö {\truecaps@outputexpanded{Ö}}

	% LATIN LETTER SMALL CAPITAL O (U+1D0F) + COMBINING GRAVE ACCENT (U+0300)
	\pgfparserdef{scparser}{initiated}ó {\truecaps@outputexpanded{ᴏ̀}}
	\pgfparserdef{scparser}{initiated}Ò {\truecaps@outputexpanded{Ò}}

	% LATIN LETTER SMALL CAPITAL O (U+1D0F) + COMBINING ACUTE ACCENT (U+0301)
	\pgfparserdef{scparser}{initiated}ó {\truecaps@outputexpanded{ᴏ́}}
	\pgfparserdef{scparser}{initiated}Ó {\truecaps@outputexpanded{Ó}}

	% LATIN LETTER SMALL CAPITAL O (U+1D0F) + COMBINING ACUTE ACCENT (U+0302)
	\pgfparserdef{scparser}{initiated}ô {\truecaps@outputexpanded{ᴏ̂}}
	\pgfparserdef{scparser}{initiated}Ô {\truecaps@outputexpanded{Ô}}

	% LATIN LETTER SMALL CAPITAL O (U+1D0F) + COMBINING DOUBLE GRAVE ACCENT (U+030F)
	\pgfparserdef{scparser}{initiated}ȍ {\truecaps@outputexpanded{ᴏ̏}}
	\pgfparserdef{scparser}{initiated}Ȍ {\truecaps@outputexpanded{Ȍ}}

	% LATIN LETTER SMALL CAPITAL O (U+1D0F) + COMBINING DOUBLE ACUTE ACCENT (U+030B)
	\pgfparserdef{scparser}{initiated}ő {\truecaps@outputexpanded{ᴏ̋}}
	\pgfparserdef{scparser}{initiated}Ő {\truecaps@outputexpanded{Ő}}

	% LATIN LETTER SMALL CAPITAL O (U+1D0F) + COMBINING TILDE (U+0303)
	\pgfparserdef{scparser}{initiated}õ {\truecaps@outputexpanded{ᴏ̃}}
	\pgfparserdef{scparser}{initiated}Õ {\truecaps@outputexpanded{Õ}}

	% LATIN LETTER SMALL CAPITAL O (U+1D0F) + COMBINING SHORT SOLIDUS OVERLAY (U+0337)
	\pgfparserdef{scparser}{initiated}ø {\truecaps@outputexpanded{ᴏ̷}}
	\pgfparserdef{scparser}{initiated}Ø {\truecaps@outputexpanded{Ø}}

% LATIN CAPITAL LETTER THORN (U+00DE) 
% There is no support for THORN. The best we can do is issue a 
% warning (see line #110) and try to make do with the regular 
% uppercase character.
\pgfparserdef{scparser}{initiated}þ {\truecaps@outputexpanded{Þ}}
\pgfparserdef{scparser}{initiated}Þ {\truecaps@outputexpanded{Þ}
%\PackageWarning{\truecapsname}{\thornwarning}% 	see line #110	FIXME AFTER DEBUGGING
} % end of Þ

% LATIN LETTER SMALL CAPITAL OE (U+0276)
\pgfparserdef{scparser}{initiated}œ {\truecaps@outputexpanded{ɶ}}
\pgfparserdef{scparser}{initiated}Œ {\truecaps@outputexpanded{Œ}}

% LATIN LETTER SMALL CAPITAL P (U+1D18)
\pgfparserdef{scparser}{initiated}p {\truecaps@outputexpanded{ᴘ}}
\pgfparserdef{scparser}{initiated}P {\truecaps@outputexpanded{P}}

%% LATIN LETTER SMALL CAPITAL Q (U+A7AF)
\pgfparserdef{scparser}{initiated}q {\truecaps@outputexpanded{ꞯ}}
\pgfparserdef{scparser}{initiated}Q {\truecaps@outputexpanded{Q}}

% LATIN LETTER SMALL CAPITAL R (U+0280)
\pgfparserdef{scparser}{initiated}r {\truecaps@outputexpanded{ʀ}}
\pgfparserdef{scparser}{initiated}R {\truecaps@outputexpanded{R}}

	% LATIN LETTER SMALL CAPITAL R (U+0280)	+ COMBINING CARON (U+030C)
	\pgfparserdef{scparser}{initiated}ř {\truecaps@outputexpanded{ʀ̌}}
	\pgfparserdef{scparser}{initiated}Ř {\truecaps@outputexpanded{Ř}}

	% TODO ==> https://www.compart.com/en/unicode/U+0052

% LATIN LETTER SMALL CAPITAL S (U+A731)
\pgfparserdef{scparser}{initiated}s {\truecaps@outputexpanded{ꜱ}}
\pgfparserdef{scparser}{initiated}S {\truecaps@outputexpanded{S}}

	% There is no German word that starts with ẞ
	% => No need for LATIN CAPITAL LETTER SHARP S (U+1E9E)
	\pgfparserdef{scparser}{initiated}ß {\truecaps@outputexpanded{ꜱꜱ}}

	% LATIN LETTER SMALL CAPITAL S (U+A731) COMBINING CARON	(U+030C)
	\pgfparserdef{scparser}{initiated}š {\truecaps@outputexpanded{ꜱ̌}}
	\pgfparserdef{scparser}{initiated}Š {\truecaps@outputexpanded{Š}}

	% TODO Ś Ŝ Ş Ș Ṡ Ṣ

% LATIN LETTER SMALL CAPITAL T (U+1D1B)
\pgfparserdef{scparser}{initiated}t {\truecaps@outputexpanded{ᴛ}}
\pgfparserdef{scparser}{initiated}T {\truecaps@outputexpanded{T}}

	% LATIN LETTER SMALL CAPITAL T (U+1D1B) + COMBINING CARON (U+030C)
	\pgfparserdef{scparser}{initiated}ť {\truecaps@outputexpanded{ᴛ̌}}
	\pgfparserdef{scparser}{initiated}Ť {\truecaps@outputexpanded{Ť}}

	% TODO Ţ Ț Ṫ Ṭ Ṯ Ṱ

% LATIN LETTER SMALL CAPITAL U (U+1D1C)
\pgfparserdef{scparser}{initiated}u {\truecaps@outputexpanded{ᴜ}}
\pgfparserdef{scparser}{initiated}U {\truecaps@outputexpanded{U}}

	% LATIN LETTER SMALL CAPITAL U (U+1D1C) + COMBINING RING ABOVE (U+030A)
	\pgfparserdef{scparser}{initiated}ů {\truecaps@outputexpanded{ᴜ̊}}
	\pgfparserdef{scparser}{initiated}Ů {\truecaps@outputexpanded{Ů}}

	% LATIN LETTER SMALL CAPITAL U (U+1D1C) + COMBINING GRAVE ACCENT (U+0300)
	\pgfparserdef{scparser}{initiated}ù {\truecaps@outputexpanded{ᴜ̀}}
	\pgfparserdef{scparser}{initiated}Ù {\truecaps@outputexpanded{Ù}}

	% LATIN LETTER SMALL CAPITAL U (U+1D1C) + COMBINING ACUTE ACCENT (U+0301)
	\pgfparserdef{scparser}{initiated}ú {\truecaps@outputexpanded{ᴜ́}}
	\pgfparserdef{scparser}{initiated}Ú {\truecaps@outputexpanded{Ú}}

	% LATIN LETTER SMALL CAPITAL U (U+1D1C) + COMBINING DIAERESIS (U+0308)	
	\pgfparserdef{scparser}{initiated}ü {\truecaps@outputexpanded{ᴜ̈}}
	\pgfparserdef{scparser}{initiated}Ü {\truecaps@outputexpanded{Ü}}

	% LATIN LETTER SMALL CAPITAL U (U+1D1C) + COMBINING CIRCUMFLEX ACCENT (U+0302)
	\pgfparserdef{scparser}{initiated}û {\truecaps@outputexpanded{ᴜ̂}}
	\pgfparserdef{scparser}{initiated}Û {\truecaps@outputexpanded{Û}}

	% LATIN LETTER SMALL CAPITAL U (U+1D1C) + COMBINING DOUBLE GRAVE ACCENT (U+030F)
	\pgfparserdef{scparser}{initiated}ȕ {\truecaps@outputexpanded{ᴜ̏}}
	\pgfparserdef{scparser}{initiated}Ȕ {\truecaps@outputexpanded{Ȕ}}

	% LATIN LETTER SMALL CAPITAL U (U+1D1C) + COMBINING DOUBLE ACUTE ACCENT (U+030B)
	\pgfparserdef{scparser}{initiated}ű {\truecaps@outputexpanded{ᴜ̋}}
	\pgfparserdef{scparser}{initiated}Ű {\truecaps@outputexpanded{Ű}}

	% TODO Ú Ǔ Ų 

% LATIN LETTER SMALL CAPITAL V (U+1D20)
\pgfparserdef{scparser}{initiated}v {\truecaps@outputexpanded{ᴠ}}
\pgfparserdef{scparser}{initiated}V {\truecaps@outputexpanded{V}}

% LATIN LETTER SMALL CAPITAL W (U+1D21)
\pgfparserdef{scparser}{initiated}w {\truecaps@outputexpanded{ᴡ}}
\pgfparserdef{scparser}{initiated}W {\truecaps@outputexpanded{W}}

	%TODO Ŵ Ẃ Ẁ 

% LATIN SMALL LETTER X (U+0078) is the only letter without 
% a matching LATIN LETTER SMALL CAPITAL * 
% The best we can do is issue a warning (see line #115) 
% and use regular LATIN SMALL LETTER X (U+0078):
\pgfparserdef{scparser}{initiated}x{\truecaps@outputexpanded{x}%
%\PackageWarning{\truecapsname}{\xwarning} %FIXME AFTER DEBUGGING
}

% LATIN CAPITAL LETTER X (U+0058) is not an issue:
\pgfparserdef{scparser}{initiated}X {\truecaps@outputexpanded{X}}

% LATIN LETTER SMALL CAPITAL Y
\pgfparserdef{scparser}{initiated}y {\truecaps@outputexpanded{ʏ}}
\pgfparserdef{scparser}{initiated}Y {\truecaps@outputexpanded{Y}}

	% LATIN LETTER SMALL CAPITAL Y (U+028F) + COMBINING DIAERESIS (U+0308)
	\pgfparserdef{scparser}{initiated}ÿ {\truecaps@outputexpanded{ʏ̈}}
	\pgfparserdef{scparser}{initiated}Ÿ {\truecaps@outputexpanded{Ÿ}}

	% LATIN LETTER SMALL CAPITAL Y (U+028F) + COMBINING ACUTE ACCENT (U+0301)
	\pgfparserdef{scparser}{initiated}ý {\truecaps@outputexpanded{ʏ́}}
	\pgfparserdef{scparser}{initiated}Ý {\truecaps@outputexpanded{Ý}}

	% TODO Ỳ Ŷ

% LATIN LETTER SMALL CAPITAL Z (U+1D22)
\pgfparserdef{scparser}{initiated}z {\truecaps@outputexpanded{ᴢ}}
\pgfparserdef{scparser}{initiated}Z {\truecaps@outputexpanded{Z}}

	% LATIN LETTER SMALL CAPITAL Z (U+1D22) + COMBINING CARON (U+030C)
	\pgfparserdef{scparser}{initiated}ž {\truecaps@outputexpanded{ᴢ̌}}
	\pgfparserdef{scparser}{initiated}Ž {\truecaps@outputexpanded{Ž}}

% LATIN LETTER SMALL CAPITAL G							(U+1D22)
	%	with	COMBINING DOT ABOVE						(U+0307)
		\pgfparserdef{scparser}{initiated}ż {\truecaps@outputexpanded{ᴢ̇}}
		\pgfparserdef{scparser}{initiated}Ż {\truecaps@outputexpanded{Ż}}

	% TODO Ź Ž Ẑ 

% BLANK SPACE
\pgfparserdef{scparser}{initiated}{blank space}%
  {\truecaps@outputexpanded{ }}

	\pgfparserdef{scparser}{initiated}+ {\truecaps@outputexpanded{+}}

	% TODO: Punctuation, Parentheses, common typographical symbols. What about "ǃ" ?
	% Small form variants? ﹐ ﹑ ﹒ ﹔ ﹕ ﹖ ﹗ ﹘ ﹙ ﹚ ﹛ ﹜ ﹝ ﹞ ﹟ ﹠ ﹡ ﹢ ﹣ ﹤ ﹥ ﹦ ﹨ ﹩ ﹪ ﹫
% 			LETTER DEFINITIONS ABOVE

\pgfparserdeffinal{scparser}%
  {\expanded{\truecaps@outputcontainer}}
\AddToHook{begindocument/end}{%
  \RenewDocumentCommand\scshape{  }{%
    \ifdefined\truecaps@initiated
      \PackageError{truecaps}{Nested use not allowed}{%
        You somehow made \string\nirshape\space expand inside
        the parser. This isn't supported.%
      }%
      \expandafter\@gobbletwo
    \else
      \global\let\truecaps@outputcontainer\@empty
    \fi
    \pgfparserparse{scparser}%
  }

  \RenewDocumentCommand\texttc{ m }{%
    \begingroup\scshape #1\endgroup
  }%
}
\endinput

% EOF "truecaps.sty"